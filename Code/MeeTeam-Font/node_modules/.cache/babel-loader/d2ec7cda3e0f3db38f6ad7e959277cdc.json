{"ast":null,"code":"import global_msg from '../utils/global.js';\nimport { getlistInfor } from '@/api/Inforlist.js';\nimport { deleteteam } from '@/api/Myteamlist.js';\nexport default {\n  name: 'MyProject',\n\n  data() {\n    return {\n      username: global_msg.nowuserid,\n      tableData: []\n    };\n  },\n\n  mounted() {\n    this.getlist(); //页面一进入就加载表格\n  },\n\n  methods: {\n    goBack() {\n      this.$router.push({\n        path: \"/users/InforList\"\n      }); //返回\n    },\n\n    getlist() {\n      var vm = this; //全局变量\n\n      getlistInfor().then(function (res) {\n        for (let item of res.data) {\n          let form = {\n            //设置添加数据的格式\n            projectname: '',\n            originator_id: '',\n            team_type: '',\n            region: '',\n            details: '',\n            date: '',\n            require_id: ''\n          };\n          form.projectname = item.requirement_name;\n          form.originator_id = item.originator_id;\n          form.team_type = item.team_type;\n          form.details = item.details;\n          form.date = item.release_time;\n          form.date = form.date.replace(\"\\\"\", \"\").replace(\"\\\"\", \"\"); //去掉时间格式的引号\n\n          form.region = item.region;\n          form.require_id = item.require_id;\n          if (form.originator_id === global_msg.nowuserid) vm.tableData.push(form);\n        }\n      });\n    },\n\n    handleEdit(index, row) {\n      //编辑操作\n      var require_id = this.tableData[index].require_id;\n      this.$router.push({\n        name: 'ChangeList',\n        params: {\n          re_id: require_id\n        }\n      });\n      console.log(index, row);\n    },\n\n    handleDelete(index, row) {\n      //删除操作\n      this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.tableData.splice(index, 1); //删除下标为index的内容\n\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n        var id = this.tableData[index].require_id; //再在数据库中删除\n\n        let param = {\n          require_id: id\n        };\n        deleteteam(param);\n        console.log(index, row);\n      }).catch(err => {\n        this.$message({\n          type: 'error',\n          message: err\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAgDA;AACA;AACA;AACA;EACAA,iBADA;;EAEAC;IACA;MACAC,8BADA;MAEAC;IAFA;EAIA,CAPA;;EAQAC;IACA,eADA,CACA;EACA,CAVA;;EAWAC;IACAC;MACA;QAAAC;MAAA,GADA,CACA;IACA,CAHA;;IAIAC;MACA,cADA,CACA;;MACAC;QACA;UACA;YAAA;YACAC,eADA;YAEAC,iBAFA;YAGAC,aAHA;YAIAC,UAJA;YAKAC,WALA;YAMAC,QANA;YAOAC;UAPA;UASAC;UACAA;UACAA;UACAA;UACAA;UACAA,0DAfA,CAeA;;UACAA;UACAA;UACA,iDACAC;QACA;MACA,CAtBA;IAuBA,CA7BA;;IA8BAC;MAAA;MACA;MACA;QAAAnB;QAAAoB;UAAAC;QAAA;MAAA;MACAC;IACA,CAlCA;;IAmCAC;MAAA;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACA,gCADA,CACA;;QACA;UACAD,eADA;UAEAE;QAFA;QAIA,0CANA,CAOA;;QACA;UACAZ;QADA;QAGAa;QACAP;MACA,CAjBA,EAiBAQ,KAjBA,CAiBAC;QACA;UACAL,aADA;UAEAE;QAFA;MAIA,CAtBA;IAuBA;;EA3DA;AAXA","names":["name","data","username","tableData","mounted","methods","goBack","path","getlist","getlistInfor","projectname","originator_id","team_type","region","details","date","require_id","form","vm","handleEdit","params","re_id","console","handleDelete","confirmButtonText","cancelButtonText","type","then","message","deleteteam","catch","err"],"sourceRoot":"src/view","sources":["MyProject.vue"],"sourcesContent":["<template>\r\n  <div id=\"myproject-container\">  \r\n    <el-container> \r\n      <el-header  style=\"text-align: left; font-size: 15px; top:50%;\">\r\n      <el-badge :value=\"0\" class=\"item\">\r\n          <el-button>返回</el-button>\r\n          <!--聊天是用户聊天-->\r\n        </el-badge>\r\n        <el-badge :value=\"0\" class=\"item\">\r\n          <el-button>聊天</el-button>\r\n          <!--聊天是用户聊天-->\r\n        </el-badge>\r\n        <el-badge :value=\"3\" class=\"item\">\r\n          <!--评论是项目评论-->\r\n          <el-button>评论</el-button>\r\n        </el-badge>\r\n        <el-badge :value=\"1\" class=\"item\" type=\"primary\">\r\n          <!--申请是需求申请-->\r\n          <el-button>申请</el-button>\r\n        </el-badge>\r\n        <span>{{ username }}</span>\r\n      </el-header>\r\n      \r\n      <el-main>\r\n        <el-table :data=\"tableData\" :default-sort=\"{ prop: 'date', order: 'descending' }\">\r\n          <el-table-column prop=\"projectname\" label=\"项目名称\" width=\"140\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"team_type\" label=\"项目类型\" width=\"140\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"region\" label=\"所在校区\" width=\"200\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"details\" label=\"项目简介\" width=\"400\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"date\" label=\"发布时间\" sortable>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n              <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-main>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport global_msg from '../utils/global.js'\r\nimport { getlistInfor } from '@/api/Inforlist.js'\r\nimport { deleteteam } from '@/api/Myteamlist.js'\r\nexport default {\r\n  name: 'MyProject',\r\n  data() {\r\n    return {\r\n      username: global_msg.nowuserid,\r\n      tableData: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getlist() //页面一进入就加载表格\r\n  },\r\n  methods: {\r\n    goBack() {\r\n            this.$router.push({ path: \"/users/InforList\" }); //返回\r\n        },\r\n    getlist() {\r\n      var vm = this;//全局变量\r\n      getlistInfor().then(function (res) {\r\n        for (let item of res.data) {\r\n          let form = {//设置添加数据的格式\r\n            projectname: '',\r\n            originator_id: '',\r\n            team_type: '',\r\n            region: '',\r\n            details: '',\r\n            date: '',\r\n            require_id: '',\r\n          }\r\n          form.projectname = item.requirement_name;\r\n          form.originator_id = item.originator_id;\r\n          form.team_type = item.team_type;\r\n          form.details = item.details;\r\n          form.date = item.release_time;\r\n          form.date = form.date.replace(\"\\\"\", \"\").replace(\"\\\"\", \"\");//去掉时间格式的引号\r\n          form.region = item.region;\r\n          form.require_id = item.require_id;\r\n          if (form.originator_id === global_msg.nowuserid)\r\n            vm.tableData.push(form);\r\n        }\r\n      })\r\n    },\r\n    handleEdit(index, row) { //编辑操作\r\n      var require_id = this.tableData[index].require_id;\r\n      this.$router.push({ name: 'ChangeList', params: { re_id: require_id } });\r\n      console.log(index, row);\r\n    },\r\n    handleDelete(index, row) {//删除操作\r\n      this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.tableData.splice(index, 1) //删除下标为index的内容\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!',\r\n        })\r\n        var id = this.tableData[index].require_id;\r\n        //再在数据库中删除\r\n        let param = {\r\n          require_id: id,\r\n        }\r\n        deleteteam(param);\r\n        console.log(index, row);\r\n      }).catch((err) => {\r\n        this.$message({\r\n          type: 'error',\r\n          message: err\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.myproject-container {\r\n  position: absolute;\r\n  margin-left: 0px;\r\n  height: 100%;\r\n  bottom: 0%;\r\n  right: 0px;\r\n  left: 0px;\r\n}\r\n\r\n.el-header {\r\n  background-color: #B3C0D1;\r\n  color: #333;\r\n  line-height: 55px;\r\n}\r\n\r\n.item {\r\n  margin-top: 0px;\r\n  margin-right: 10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}